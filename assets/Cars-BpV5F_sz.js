import{c as T,u as P,e as I,a as c,j as e,B as m,P as V,I as r,f as v,E as D,C as M,_ as A}from"./index-CY3grNaN.js";import{C as N,a as E,b as S,c as y}from"./Card-BXQ70ezj.js";import{E as _}from"./EditCarDrawer-CYfccvbZ.js";import{D as O,a as q}from"./Dialog-BAf8fP32.js";import{S as F}from"./square-pen-DsQTHsOQ.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 4 0v-6.998a2 2 0 0 0-.59-1.42L18 5",key:"1wtuz0"}],["path",{d:"M14 21V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v16",key:"e09ifn"}],["path",{d:"M2 21h13",key:"1x0fut"}],["path",{d:"M3 9h11",key:"1p7c0w"}]],R=T("fuel",L);function Q(){const{cars:h,addCar:C}=P(),w=I(),[p,j]=c.useState(!1),[a,t]=c.useState({make:"",model:"",year:"",price:"",tenDayPrice:"",monthlyPrice:"",plateNumber:"",image:"",color:"",mileage:"",fuelType:"Petrol",fitnessValidTo:"",taxValidTo:"",insuranceValidTo:"",description:"",rcImage:"",insuranceImage:"",pocImage:""}),[f,b]=c.useState(null),[l,d]=c.useState(null),o=async(s,u)=>{const x=u.target.files[0];if(x)try{const{compressImage:g}=await A(async()=>{const{compressImage:n}=await import("./imageCompression-n-6HeI31.js");return{compressImage:n}},[]),i=await g(x);t(n=>({...n,[s]:i}))}catch(g){console.error("Image compression failed:",g);const i=new FileReader;i.onloadend=()=>{t(n=>({...n,[s]:i.result}))},i.readAsDataURL(x)}},k=s=>{if(s.preventDefault(),h.some(u=>u.plateNumber===a.plateNumber)){alert("A car with this Plate Number already exists!");return}C({...a,status:"Available"}),j(!1),t({make:"",model:"",year:"",price:"",tenDayPrice:"",monthlyPrice:"",plateNumber:"",image:"",color:"",mileage:"",fuelType:"Petrol",fitnessValidTo:"",taxValidTo:"",insuranceValidTo:"",description:"",rcImage:"",insuranceImage:"",pocImage:""})};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Cars"}),e.jsxs(m,{onClick:()=>j(!p),children:[e.jsx(V,{className:"mr-2 h-4 w-4"})," Add Car"]})]}),p&&e.jsxs(N,{className:"max-w-4xl mx-auto",children:[e.jsx(E,{children:e.jsx(S,{children:"Add New Car"})}),e.jsx(y,{children:e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(r,{placeholder:"Make",value:a.make,onChange:s=>t({...a,make:s.target.value}),required:!0}),e.jsx(r,{placeholder:"Model",value:a.model,onChange:s=>t({...a,model:s.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(r,{type:"number",placeholder:"Year",value:a.year,onChange:s=>t({...a,year:s.target.value}),required:!0}),e.jsx(r,{placeholder:"Plate Number",value:a.plateNumber,onChange:s=>t({...a,plateNumber:s.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(r,{placeholder:"Color",value:a.color,onChange:s=>t({...a,color:s.target.value})}),e.jsx(r,{placeholder:"Mileage",value:a.mileage,onChange:s=>t({...a,mileage:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Fuel Type"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-surface-dark dark:text-text-dark dark:border-surface",value:a.fuelType,onChange:s=>t({...a,fuelType:s.target.value}),children:[e.jsx("option",{value:"Petrol",children:"Petrol"}),e.jsx("option",{value:"Diesel",children:"Diesel"}),e.jsx("option",{value:"Electric",children:"Electric"}),e.jsx("option",{value:"Hybrid",children:"Hybrid"}),e.jsx("option",{value:"CNG",children:"CNG"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(r,{type:"number",placeholder:"Daily Price",value:a.price,onChange:s=>t({...a,price:s.target.value}),required:!0}),e.jsx(r,{type:"number",placeholder:"10 Days Price",value:a.tenDayPrice,onChange:s=>t({...a,tenDayPrice:s.target.value})}),e.jsx(r,{type:"number",placeholder:"Monthly Price",value:a.monthlyPrice,onChange:s=>t({...a,monthlyPrice:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Validity Dates"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Fitness"}),e.jsx(r,{type:"date",value:a.fitnessValidTo,onChange:s=>t({...a,fitnessValidTo:s.target.value})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Tax"}),e.jsx(r,{type:"date",value:a.taxValidTo,onChange:s=>t({...a,taxValidTo:s.target.value})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Insurance"}),e.jsx(r,{type:"date",value:a.insuranceValidTo,onChange:s=>t({...a,insuranceValidTo:s.target.value})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-surface-dark dark:text-text-dark dark:border-surface",placeholder:"Car description...",value:a.description,onChange:s=>t({...a,description:s.target.value})})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Documents & Images"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium",children:"Main Image"}),e.jsx(r,{type:"file",accept:"image/*",onChange:s=>o("image",s),className:"cursor-pointer text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium",children:"RC Image"}),e.jsx(r,{type:"file",accept:"image/*",onChange:s=>o("rcImage",s),className:"cursor-pointer text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium",children:"Insurance"}),e.jsx(r,{type:"file",accept:"image/*",onChange:s=>o("insuranceImage",s),className:"cursor-pointer text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium",children:"POC Image"}),e.jsx(r,{type:"file",accept:"image/*",onChange:s=>o("pocImage",s),className:"cursor-pointer text-xs"})]})]})]}),e.jsx(m,{type:"submit",className:"w-full",children:"Save Car"})]})})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 items-start",children:h.map(s=>e.jsxs(N,{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer group",onClick:()=>d(s),children:[e.jsxs("div",{className:"aspect-video w-full overflow-hidden relative",children:[e.jsx("img",{src:s.image,alt:`${s.make} ${s.model}`,className:"h-full w-full object-cover transition-transform group-hover:scale-105"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:v("px-2 py-1 rounded-full text-xs font-medium shadow-sm border",s.status==="Available"?"bg-green-100 text-green-800 border-green-200":s.status==="On Rent"?"bg-blue-100 text-blue-800 border-blue-200":s.status==="On Maintenance"?"bg-orange-100 text-orange-800 border-orange-200":"bg-yellow-100 text-yellow-800 border-yellow-200"),children:s.status})})]}),e.jsxs(y,{className:"p-4",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg leading-none mb-1",children:[s.make," ",s.model]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.year," • ",s.plateNumber]})]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-lg font-bold text-primary",children:["₹",s.price,e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/day"})]}),s.monthlyPrice&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["₹",s.monthlyPrice,"/month"]})]})]})]},s.id))}),e.jsx(O,{isOpen:!!l,onClose:()=>d(null),children:l&&e.jsxs("div",{className:"space-y-6",children:[l.image&&e.jsxs("div",{className:"relative w-full aspect-video rounded-lg overflow-hidden border",children:[e.jsx("img",{src:l.image,className:"object-cover w-full h-full",alt:"Car"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:v("px-2 py-1 rounded-full text-xs font-medium shadow-sm border",l.status==="Available"?"bg-green-100 text-green-800 border-green-200":l.status==="On Rent"?"bg-blue-100 text-blue-800 border-blue-200":l.status==="On Maintenance"?"bg-orange-100 text-orange-800 border-orange-200":"bg-yellow-100 text-yellow-800 border-yellow-200"),children:l.status})})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(q,{className:"text-2xl mb-1",children:[l.make," ",l.model]}),e.jsxs("p",{className:"text-base text-muted-foreground",children:[l.year," • ",e.jsx("span",{className:"font-mono bg-muted px-1 rounded text-foreground",children:l.plateNumber})]}),l.color&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 capitalize",children:l.color})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xl font-bold text-primary",children:["₹",l.price,e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/day"})]}),l.monthlyPrice&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["₹",l.monthlyPrice,"/mo"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 border rounded-lg bg-muted/20 flex items-center gap-3",children:[e.jsx(R,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Fuel Type"}),e.jsx("p",{className:"font-semibold",children:l.fuelType})]})]}),e.jsxs("div",{className:"p-3 border rounded-lg bg-muted/20 flex items-center gap-3",children:[e.jsx(D,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Mileage"}),e.jsx("p",{className:"font-semibold",children:l.mileage||"N/A"})]})]})]}),(l.insuranceValidTo||l.fitnessValidTo)&&e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 bg-muted/20 p-3 rounded-lg border",children:[e.jsx("p",{className:"font-medium text-foreground mb-1",children:"Validity"}),l.insuranceValidTo&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Insurance:"})," ",e.jsx("span",{children:new Date(l.insuranceValidTo).toLocaleDateString()})]}),l.fitnessValidTo&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fitness:"})," ",e.jsx("span",{children:new Date(l.fitnessValidTo).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(m,{className:"flex-1",onClick:()=>{d(null),w("/cars/"+l.id)},children:[e.jsx(M,{className:"mr-2 h-4 w-4"})," View Full Details"]}),e.jsx(m,{variant:"outline",size:"icon",onClick:()=>{d(null),b(l)},children:e.jsx(F,{className:"h-4 w-4"})})]})]})}),e.jsx(_,{isOpen:!!f,onClose:()=>b(null),car:f})]})}export{Q as Cars};
