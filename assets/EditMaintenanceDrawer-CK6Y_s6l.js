import{c as R,a as u,j as e,f as v,u as k,S as y,i as w,k as C,I as d,B as b}from"./index-D4_0fjVP.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],P=R("upload",E),N=u.createContext(null),A=u.forwardRef(({className:m,value:o,onValueChange:l,defaultValue:p,children:s,...i},x)=>{const[g,n]=u.useState(p),f=o!==void 0?o:g,t=l||n;return e.jsx(N.Provider,{value:{value:f,onValueChange:t},children:e.jsx("div",{ref:x,className:v("w-full",m),...i,children:s})})});A.displayName="Tabs";const I=u.forwardRef(({className:m,...o},l)=>e.jsx("div",{ref:l,className:v("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",m),...o}));I.displayName="TabsList";const W=u.forwardRef(({className:m,value:o,children:l,...p},s)=>{const i=u.useContext(N);if(!i)throw new Error("TabsTrigger must be used within Tabs");const x=i.value===o;return e.jsx("button",{ref:s,className:v("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",x?"bg-background text-foreground shadow-sm":"hover:bg-background/50 hover:text-foreground",m),onClick:()=>i.onValueChange(o),...p,children:l})});W.displayName="TabsTrigger";const q=u.forwardRef(({className:m,value:o,children:l,...p},s)=>{const i=u.useContext(N);if(!i)throw new Error("TabsContent must be used within Tabs");return i.value!==o?null:e.jsx("div",{ref:s,className:v("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",m),...p,children:l})});q.displayName="TabsContent";function M({isOpen:m,onClose:o,carId:l}){const{addMaintenanceRecord:p,cars:s,maintenanceRecords:i}=k(),[x,g]=u.useState(l||""),[n,f]=u.useState(!1),[t,c]=u.useState({workshopName:"",workshopDetails:"",phoneNumber:"",amount:"",amountPaid:"",date:"",returnDate:"",paymentStatus:"Paid",description:"",image:null}),j=i.reduce((a,r)=>(a.some(h=>h.name===r.workshopName)||a.push({name:r.workshopName,details:r.workshopDetails,phone:r.phoneNumber}),a),[]),D=a=>{const r=j.find(h=>h.name===a);c(r?h=>({...h,workshopName:r.name,workshopDetails:r.details||"",phoneNumber:r.phone||""}):h=>({...h,workshopName:"",workshopDetails:"",phoneNumber:""}))},S=a=>{const r=a.target.files[0];if(r){const h=new FileReader;h.onloadend=()=>{c({...t,image:h.result})},h.readAsDataURL(r)}},T=a=>{a.preventDefault();const r=l||x;r&&(p({...t,carId:r,amount:t.amount?parseFloat(t.amount):0,amountPaid:t.amountPaid?parseFloat(t.amountPaid):0}),o(),c({workshopName:"",workshopDetails:"",phoneNumber:"",amount:"",amountPaid:"",date:"",returnDate:"",paymentStatus:"Paid",description:"",image:null}),l||g(""),f(!1))};return e.jsxs(y,{isOpen:m,onClose:o,children:[e.jsx(w,{children:e.jsx(C,{children:"Add Maintenance Record"})}),e.jsx("div",{className:"mt-6",children:e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[!l&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Car"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-surface-dark dark:text-text-dark dark:border-surface",value:x,onChange:a=>g(a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select a car..."}),s.map(a=>e.jsxs("option",{value:a.id,children:[a.make," ",a.model," (",a.licensePlate||"No Plate",")"]},a.id))]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"checkbox",id:"useExisting",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",checked:n,onChange:a=>f(a.target.checked)}),e.jsx("label",{htmlFor:"useExisting",className:"text-sm font-medium",children:"Select from Existing Workshops"})]}),n?e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Workshop"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-surface-dark dark:text-text-dark dark:border-surface",value:t.workshopName,onChange:a=>D(a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select a workshop..."}),j.map((a,r)=>e.jsx("option",{value:a.name,children:a.name},r))]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Workshop Name"}),e.jsx(d,{value:t.workshopName,onChange:a=>c({...t,workshopName:a.target.value}),required:!0,placeholder:"Enter new workshop name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Workshop Address"}),e.jsx(d,{value:t.workshopDetails,onChange:a=>c({...t,workshopDetails:a.target.value}),required:!0,readOnly:n,className:n?"bg-muted text-muted-foreground":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Phone Number"}),e.jsx(d,{value:t.phoneNumber,onChange:a=>c({...t,phoneNumber:a.target.value}),placeholder:"Optional",readOnly:n,className:n?"bg-muted text-muted-foreground":""})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Total Amount"}),e.jsx(d,{type:"number",value:t.amount,onChange:a=>c({...t,amount:a.target.value}),placeholder:"Total Bill"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Amount Paid"}),e.jsx(d,{type:"number",value:t.amountPaid,onChange:a=>c({...t,amountPaid:a.target.value}),placeholder:"Paid so far"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Payment Status"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-surface-dark dark:text-text-dark dark:border-surface",value:t.paymentStatus,onChange:a=>c({...t,paymentStatus:a.target.value}),children:[e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Pending",children:"Pending"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Date"}),e.jsx(d,{type:"date",value:t.date,onChange:a=>c({...t,date:a.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Return Date (Optional)"}),e.jsx(d,{type:"date",value:t.returnDate,onChange:a=>c({...t,returnDate:a.target.value}),placeholder:"Select return date"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Setting a return date will mark the car as Available."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-surface-dark dark:text-text-dark dark:border-surface",value:t.description,onChange:a=>c({...t,description:a.target.value}),placeholder:"Optional"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Receipt/Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(b,{type:"button",variant:"outline",onClick:()=>document.getElementById("maintenance-image").click(),className:"w-full",children:[e.jsx(P,{className:"mr-2 h-4 w-4"})," Upload Image"]}),e.jsx("input",{id:"maintenance-image",type:"file",accept:"image/*",className:"hidden",onChange:S})]}),t.image&&e.jsx("div",{className:"mt-2 relative h-32 w-full rounded-md overflow-hidden border",children:e.jsx("img",{src:t.image,alt:"Preview",className:"h-full w-full object-cover"})})]}),e.jsx(b,{type:"submit",className:"w-full",children:"Save Record"})]})})]})}function U({isOpen:m,onClose:o,record:l}){const{updateMaintenanceRecord:p}=k(),[s,i]=u.useState({workshopName:"",workshopDetails:"",phoneNumber:"",amount:"",amountPaid:"",date:"",returnDate:"",paymentStatus:"Paid",description:"",image:null});u.useEffect(()=>{l&&i({workshopName:l.workshopName||"",workshopDetails:l.workshopDetails||"",phoneNumber:l.phoneNumber||"",amount:l.amount||"",amountPaid:l.amountPaid||"",date:l.date||"",returnDate:l.returnDate||"",paymentStatus:l.paymentStatus||"Paid",description:l.description||"",image:l.image||null})},[l]);const x=n=>{const f=n.target.files[0];if(f){const t=new FileReader;t.onloadend=()=>{i({...s,image:t.result})},t.readAsDataURL(f)}},g=n=>{n.preventDefault(),l&&(p(l.id,{...l,...s,amount:s.amount?parseFloat(s.amount):0,amountPaid:s.amountPaid?parseFloat(s.amountPaid):0}),o())};return l?e.jsxs(y,{isOpen:m,onClose:o,children:[e.jsx(w,{children:e.jsx(C,{children:"Edit Maintenance Record"})}),e.jsx("div",{className:"mt-6",children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Workshop Name"}),e.jsx(d,{value:s.workshopName,onChange:n=>i({...s,workshopName:n.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Workshop Address"}),e.jsx(d,{value:s.workshopDetails,onChange:n=>i({...s,workshopDetails:n.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Phone Number"}),e.jsx(d,{value:s.phoneNumber,onChange:n=>i({...s,phoneNumber:n.target.value}),placeholder:"Optional"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Total Amount"}),e.jsx(d,{type:"number",value:s.amount,onChange:n=>i({...s,amount:n.target.value}),placeholder:"Total Bill"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Amount Paid"}),e.jsx(d,{type:"number",value:s.amountPaid,onChange:n=>i({...s,amountPaid:n.target.value}),placeholder:"Paid so far"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Payment Status"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-surface-dark dark:text-text-dark dark:border-surface",value:s.paymentStatus,onChange:n=>i({...s,paymentStatus:n.target.value}),children:[e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Pending",children:"Pending"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Date"}),e.jsx(d,{type:"date",value:s.date,onChange:n=>i({...s,date:n.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Return Date (Completion)"}),e.jsx(d,{type:"date",value:s.returnDate,onChange:n=>i({...s,returnDate:n.target.value}),placeholder:"Select return date"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Setting a return date will mark the car as Available."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("textarea",{className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-surface-dark dark:text-text-dark dark:border-surface",value:s.description,onChange:n=>i({...s,description:n.target.value}),placeholder:"Optional"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Receipt/Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(b,{type:"button",variant:"outline",onClick:()=>document.getElementById("edit-maintenance-image").click(),className:"w-full",children:[e.jsx(P,{className:"mr-2 h-4 w-4"})," Upload Image"]}),e.jsx("input",{id:"edit-maintenance-image",type:"file",accept:"image/*",className:"hidden",onChange:x})]}),s.image&&e.jsx("div",{className:"mt-2 relative h-32 w-full rounded-md overflow-hidden border",children:e.jsx("img",{src:s.image,alt:"Preview",className:"h-full w-full object-cover"})})]}),e.jsx(b,{type:"submit",className:"w-full",children:"Save Changes"})]})})]}):null}export{M as A,U as E,A as T,I as a,W as b,q as c};
